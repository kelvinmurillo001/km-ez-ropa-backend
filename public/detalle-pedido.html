<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Detalle del Pedido - Seguimiento | KM & EZ ROPA</title>

  <!-- 🔍 SEO y Seguridad -->
  <meta name="robots" content="noindex, nofollow" />
  <meta name="description" content="Consulta el detalle completo de tu pedido: productos, total, estado y fecha. Genera un PDF para respaldo y seguimiento personalizado." />
  <meta name="keywords" content="pedido, seguimiento, compras, km & ez ropa, resumen pedido, pdf pedido, cliente, detalle" />
  <meta name="theme-color" content="#ff6d00" />
  <meta name="author" content="KM & EZ ROPA" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <!-- 🔒 Seguridad base (CSP por encabezado si posible) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; img-src 'self' data: https://*.googleusercontent.com https://lh3.googleusercontent.com; script-src 'self' https://www.googletagmanager.com https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; connect-src 'self'; frame-src 'none'; object-src 'none'; base-uri 'self';" />

  <!-- 🎨 Estilos -->
  <link rel="stylesheet" href="/css/global.css" />
  <link rel="stylesheet" href="/css/componentes.css" />
  <link rel="stylesheet" href="/css/fondo.css" />
  <link rel="stylesheet" href="/css/detalle-pedido.css" />

  <!-- ✅ Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BNWNNFDCC3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BNWNNFDCC3');
  </script>

  <!-- 📜 Scripts -->
  <script type="module" src="/js/detalle-pedido.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer integrity="sha384-WNXfxKtYxDg5WXaV9hMSxKhZ8sYq0yzUz6CU9EZd79uNv7v2Y8MuDhCqtX2ZvoNH" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js" defer integrity="sha384-HPr7c8MuH43lHV77kaAm6MDWfYJSgEK+xCKgTnEF1jEwN77h1yGwUJZbd/37QUFa" crossorigin="anonymous"></script>
</head>

<body>
  <!-- 🧭 Encabezado -->
  <header class="main-header" role="banner">
    <div class="logo">
      <a href="/" aria-label="Volver al inicio">
        <img src="/assets/logo.jpg" alt="Logo KM & EZ ROPA" loading="lazy" />
      </a>
      <div class="brand">
        <h1>KM & EZ ROPA</h1>
        <p>Seguimiento de Pedido</p>
      </div>
    </div>

    <nav class="nav-links" aria-label="Navegación principal">
      <a href="/cliente.html" aria-label="Volver a Mis Pedidos">🔙 Mis Pedidos</a>
      <a href="/index.html" aria-label="Volver al inicio">🏠 Inicio</a>
    </nav>
  </header>

  <!-- 📋 Contenido principal -->
  <main class="detalle-pedido-container fade-in" role="main" aria-label="Detalle completo del pedido">
    <h2 class="text-center">📦 Detalle del Pedido</h2>

    <!-- 📄 Botón para descargar -->
    <div class="text-center mt-2">
      <button id="descargarPdfBtn" class="btn-principal" aria-label="Descargar este pedido como PDF">📄 Descargar PDF</button>
    </div>

    <!-- 🧾 Información del Pedido -->
    <section id="pedidoDetalle" class="pedido-detalle mt-3" aria-live="polite">
      <p class="text-center">⏳ Cargando información del pedido...</p>
    </section>
  </main>

  <!-- 🛎️ Mensajes -->
  <div id="adminMensaje" class="admin-message oculto" role="alert" aria-live="assertive"></div>

  <!-- ⚠️ Fallback JS -->
  <noscript>
    <p style="text-align: center; color:red; font-weight:bold;">⚠️ Activa JavaScript para ver correctamente esta página.</p>
  </noscript>
</body>
</html>
